<!DOCTYPE html>
<html>
<head>
  <title>SoundCloud Player</title>
  <script src="https://connect.soundcloud.com/sdk/sdk-3.3.2.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    button { margin: 10px; padding: 10px 20px; }
    #tracks { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>SoundCloud Player</h1>
  <button onclick="login()">Login with SoundCloud</button>
  <div id="tracks"></div>

  <script>
    SC.initialize({
      client_id: 'f6k2kBKdKxsBaJCEeHQHScqQLINy5UUN',
      redirect_uri: window.location.origin + '/callback.html'
    });

    function login() {
      SC.connect().then(() => {
        return SC.get('/me');
      }).then(me => {
        alert(`Logged in as ${me.username}`);
        loadTracks();
      }).catch(err => {
        console.error(err);
        alert("Login failed.");
      });
    }

    function loadTracks() {
      SC.get('/me/tracks').then(tracks => {
        const container = document.getElementById('tracks');
        container.innerHTML = '';
        tracks.forEach(track => {
          const el = document.createElement('div');
          el.innerHTML = `
            <h3>${track.title}</h3>
            <audio controls src="${track.stream_url}?client_id=f6k2kBKdKxsBaJCEeHQHScqQLINy5UUN"></audio>
          `;
          container.appendChild(el);
        });
      });
    }
  </script>
</body>
</html>
